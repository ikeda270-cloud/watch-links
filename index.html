<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>Links</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: sans-serif; margin: 1em; }
select, button { font-size: 1em; margin: 0.2em; }
li { margin: 0.4em 0; }
small { color: #666; }
</style>
</head>
<body>

<h1>Links</h1>

<!-- UI -->

<div class="filters">
  <label>
    開始:
    <select  type="date" id="dateFrom">
      <option value="">指定なし</option>
      <option value="0">今日</option>
      <option value="1">1日前</option>
      <option value="3">3日前</option>
      <option value="7">7日前</option>
      <option value="30">30日前</option>
    </select>
  </label>

  <label>
    終了:
    <select  type="date" id="dateTo">
      <option value="">指定なし</option>
      <option value="0">今日</option>
      <option value="1">1日前</option>
      <option value="3">3日前</option>
      <option value="7">7日前</option>
      <option value="30">30日前</option>
    </select>
  </label>
</div>

<hr>
  
<div>
  並び替え:
  <select id="sortKey">
    <option value="date">日付</option>
    <option value="title">タイトル</option>
    <option value="link">URL</option>
  </select>

  ドメイン:
  <select id="domainFilter">
    <option value="">すべて</option>
  </select>

  表示件数:
  <select id="limit">
    <option value="10">10</option>
    <option value="20">20</option>
    <option value="50">50</option>
    <option value="0">全件</option>
  </select>

  <button onclick="apply()">適用</button>
</div>

<hr>

<ul id="list"></ul>

<script>
const ITEMS = [
  {
    "title": "まとめテンプレ",
    "link": "https://writening.net/page?kiEVeN",
    "date": "2026-01-21T06:06:53.000Z",
    "domain": "writening.net"
  },
  {
    "title": "異世界転生ダンジョンマスター　温泉ダンジョンを作る （天原） - カクヨム",
    "link": "https://kakuyomu.jp/works/16818792435506734395",
    "date": "2026-01-21T05:51:52.000Z",
    "domain": "kakuyomu.jp"
  },
  {
    "title": "暴走フォーム、扱えないのは最初だけ説 : あにまんch",
    "link": "https://animanch.com/archives/21110573.html",
    "date": "2026-01-21T05:48:06.000Z",
    "domain": "animanch.com"
  },
  {
    "title": "なんかすげえトーチ余ったな…｜あにまん掲示板",
    "link": "https://bbs.animanch.com/board/5712244/",
    "date": "2026-01-21T05:36:21.000Z",
    "domain": "bbs.animanch.com"
  },
  {
    "title": "嘘字幕で遊びたい｜あにまん掲示板",
    "link": "https://bbs.animanch.com/board/6182933/",
    "date": "2026-01-21T05:26:52.000Z",
    "domain": "bbs.animanch.com"
  },
  {
    "title": "【if 閲覧/ネタバレ注意】もし所長の落下地点がカルデアス日本だったら｜あにまん掲示板",
    "link": "https://bbs.animanch.com/board/6076543/",
    "date": "2026-01-21T02:25:29.000Z",
    "domain": "bbs.animanch.com"
  },
  {
    "title": "HTMLのtableをExeclのようにフィルタする",
    "link": "https://webparts.cman.jp/table/filter/",
    "date": "2026-01-20T19:20:08.000Z",
    "domain": "webparts.cman.jp"
  },
  {
    "title": "simplePaginationのサンプルデモ",
    "link": "https://konoti.com/website/javascript/demo/table-sort-demot.html",
    "date": "2026-01-20T17:21:15.000Z",
    "domain": "konoti.com"
  },
  {
    "title": "一体何者なんだ(棒)みたいな変装｜あにまん掲示板",
    "link": "https://bbs.animanch.com/board/5813197/?res=38",
    "date": "2026-01-20T06:55:47.000Z",
    "domain": "bbs.animanch.com"
  },
  {
    "title": "【FGO】「第2部 終章」レイド支柱七樹戦『M・スペクトラム（開始）』感想まとめ。異聞作成方針は編纂時における余剰時空の剪定閲覧（カタログ・マーケット）…サーヴァントたちが続々登場してカオス極まる！ : でもにっしょん",
    "link": "https://demonition.com/blog-entry-195188.html",
    "date": "2026-01-20T06:47:01.000Z",
    "domain": "demonition.com"
  },
  {
    "title": "あにまんch｜アニメ漫画ゲーム情報サイト",
    "link": "https://animanch.com/",
    "date": "2026-01-20T06:22:14.000Z",
    "domain": "animanch.com"
  },
  {
    "title": "FGОの疑問をうどんに例えて答えてみる｜あにまん掲示板",
    "link": "https://bbs.animanch.com/board/6123330/?res=172",
    "date": "2026-01-20T06:16:14.000Z",
    "domain": "bbs.animanch.com"
  },
  {
    "title": "fig速-フィギュア・プラモ 新作ホビー情報まとめ",
    "link": "https://figsoku.net/page/2",
    "date": "2026-01-20T06:12:44.000Z",
    "domain": "figsoku.net"
  },
  {
    "title": "【葬送のフリーレン】大エルフの断末魔か？ : ねいろ速報さん",
    "link": "http://animesoku.com/archives/27205876.html",
    "date": "2026-01-17T07:42:37.000Z",
    "domain": "animesoku.com"
  },
  {
    "title": "でもにっしょん｜TYPE-MOONファンサイト",
    "link": "https://demonition.com/",
    "date": "2026-01-17T07:20:31.000Z",
    "domain": "demonition.com"
  },
  {
    "title": "店舗検索 | ワンカルビ",
    "link": "https://one-karubi.1dining.co.jp/store/",
    "date": "2026-01-17T07:15:13.000Z",
    "domain": "one-karubi.1dining.co.jp"
  },
  {
    "title": "テスト",
    "link": "https://tagembed.com/ja/blog/embed-rss-feeds-on-websites/",
    "date": "2025-12-21T00:00:00.000Z",
    "domain": "tagembed.com"
  }
];
let asc = true;

const domainSelect = document.getElementById("domainFilter");
const dateFromInput = document.getElementById("dateFrom"); // ★追加
const dateToInput   = document.getElementById("dateTo");   // ★追加

[...new Set(ITEMS.map(i => i.domain))]
  .sort()
  .forEach(d => {
    const o = document.createElement("option");
    o.value = d;
    o.textContent = d;
    domainSelect.appendChild(o);
  });

function apply() {
  const key = document.getElementById("sortKey").value;
  const domain = domainSelect.value;
  const limit = Number(document.getElementById("limit").value);

  // ★追加：日付範囲取得
  //const from = dateFromInput.value
  //  ? new Date(dateFromInput.value)
  //  : null;
  //const to = dateToInput.value
  //  ? new Date(dateToInput.value)
  //  : null;

  let list = ITEMS.slice();

  // ドメインフィルタ
  if (domain) {
    list = list.filter(i => i.domain === domain);
  }

// ★日付文字列（YYYY-MM-DD）
const fromDays = dateFromInput.value;
const toDays   = dateToInput.value;

const from = fromDays !== ""
  ? daysAgoToDateString(fromDays)
  : null;

const to = toDays !== ""
  ? daysAgoToDateString(toDays)
  : null;

if (from || to) {
  list = list.filter(i => {
    const d = i.date.slice(0, 10); // YYYY-MM-DD

    if (from && d < from) return false;
    if (to   && d > to)   return false;

    return true;
  });
}

  // ソート
  list.sort((a, b) => {
    const A = a[key];
    const B = b[key];
    return (A > B ? 1 : -1) * (asc ? 1 : -1);
  });

  if (limit > 0) list = list.slice(0, limit);

  asc = !asc;
  render(list);
}

function daysAgoToDateString(days) {
  const d = new Date();
  d.setDate(d.getDate() - Number(days));
  return d.toISOString().slice(0, 10);
}
  
function render(items) {
  const ul = document.getElementById("list");
  ul.innerHTML = "";
  items.forEach(i => {
    const li = document.createElement("li");
    li.innerHTML = `
      <a href="${i.link}">${i.title}</a><br>
      <small>${i.domain} / ${i.date.slice(0,10)}</small>
    `;
    ul.appendChild(li);
  });
}

// ★初期表示
apply();

// ★追加：日付変更時に自動再適用
dateFromInput.addEventListener("change", apply);
dateToInput.addEventListener("change", apply);
</script>

<hr>

<footer>
  <small>
    最終更新: <span id="buildTime">2026-01-21 14:07:12</span>
  </small>
</footer>

</body>
</html>
